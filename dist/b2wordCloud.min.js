!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.B2wordCloud=e():t.B2wordCloud=e()}(this,function(){return function(t){function e(i){if(o[i])return o[i].exports;var n=o[i]={exports:{},id:i,loaded:!1};return t[i].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r=o(1),a=e.B2wordCloud=function(){function t(e,o){i(this,t),this._wrapper=e,this._container=null,this._tooltip=null,this._options=Object.assign({renderer:"canvas",tooltip:{show:!0,formatter:null}},o),this._wordcloud2=null,this._init()}return n(t,[{key:"_init",value:function(){this._initContainer(),this._setOptions()}},{key:"_initContainer",value:function(){"div"===this._options.renderer?(this._container=document.createElement("div"),this._container.style.width="100%",this._container.style.height="100%"):"canvas"===this._options.renderer&&(this._container=document.createElement("canvas")),"canvas"===this._options.renderer&&this._setCanvasSize(),this._wrapper.appendChild(this._container)}},{key:"_initTooltip",value:function(){this._tooltip||(this._tooltip=document.createElement("div"),this._tooltip.className=this._options.tooltip.className||"",this._tooltip.style.backgroundColor=this._options.tooltip.backgroundColor||"rgba(0,0,0,0.8)",this._tooltip.style.color="#fff",this._tooltip.style.padding="5px",this._tooltip.style.borderRadius="5px",this._tooltip.style.fontSize="13px",this._tooltip.style.lineHeight="1.4",this._tooltip.style.webkitTransition="left 0.2s, top 0.2s",this._tooltip.style.transition="left 0.2s, top 0.2s",this._tooltip.style.position="absolute",this._tooltip.style.whiteSpace="nowrap",this._tooltip.style.zIndex="999",this._tooltip.style.display="none"),this._wrapper.appendChild(this._tooltip)}},{key:"_setCanvasSize",value:function(){var t=this._wrapper.clientWidth,e=this._wrapper.clientHeight;this._container.width=t,this._container.height=e}},{key:"_setOptions",value:function(){var t=this;if(this._options.tooltip.show){this._initTooltip();var e=this._options.hover;this._options.hover=function(o,i,n){if(e&&e(o,i,n),o){var r=o[0]+": "+o[1];"[object Function]"===Object.prototype.toString.call(t._options.tooltip.formatter)&&(r=t._options.tooltip.formatter(o)),t._tooltip.style.display="block";var a=t._tooltip.clientWidth,s=t._tooltip.clientHeight,l=s+("div"===t._options.renderer?15:10),c=a/2;t._tooltip.style.position="absolute",t._tooltip.style.top=("div"===t._options.renderer?n.y-l:n.y-l)+"px",t._tooltip.style.left=("div"===t._options.renderer?n.x-c:n.x-c)+"px",t._tooltip.innerHTML=r}else t._tooltip.style.display="none"}}this._render()}},{key:"_render",value:function(){this._wordcloud2=r(this._container,this._options)}},{key:"resize",value:function(){"canvas"===this._options.renderer&&this._setCanvasSize(),this._render()}}]),t}();t.exports=a},function(t,e,o){var i,n;(function(){/*!
	   * wordcloud2.js
	   * http://timdream.org/wordcloud2.js/
	   *
	   * Copyright 2011 - 2013 Tim Chien
	   * Released under the MIT license
	   */
"use strict";window.setImmediate||(window.setImmediate=function(){return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(!window.postMessage||!window.addEventListener)return null;var t=[void 0],e="zero-timeout-message",o=function(o){var i=t.length;return t.push(o),window.postMessage(e+i.toString(36),"*"),i};return window.addEventListener("message",function(o){if("string"==typeof o.data&&o.data.substr(0,e.length)===e){o.stopImmediatePropagation();var i=parseInt(o.data.substr(e.length),36);t[i]&&(t[i](),t[i]=void 0)}},!0),window.clearImmediate=function(e){t[e]&&(t[e]=void 0)},o}()||function(t){window.setTimeout(t,0)}}()),window.clearImmediate||(window.clearImmediate=function(){return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(t){window.clearTimeout(t)}}()),function(o){var r=function(){var t=document.createElement("canvas");if(!t||!t.getContext)return!1;var e=t.getContext("2d");return!!e&&(!!e.getImageData&&(!!e.fillText&&(!!Array.prototype.some&&!!Array.prototype.push)))}(),a=function(){if(r){for(var t,e,o=document.createElement("canvas").getContext("2d"),i=20;i;){if(o.font=i.toString(10)+"px sans-serif",o.measureText("Ｗ").width===t&&o.measureText("m").width===e)return i+1;t=o.measureText("Ｗ").width,e=o.measureText("m").width,i--}return 0}}(),s=function(t){for(var e,o,i=t.length;i;e=Math.floor(Math.random()*i),o=t[--i],t[i]=t[e],t[e]=o);return t},l=function(t,e){function o(t,e){return"hsl("+(360*Math.random()).toFixed()+","+(30*Math.random()+70).toFixed()+"%,"+(Math.random()*(e-t)+t).toFixed()+"%)"}if(r){Array.isArray(t)||(t=[t]),t.forEach(function(e,o){if("string"==typeof e){if(t[o]=document.getElementById(e),!t[o])throw"The element id specified is not found."}else if(!e.tagName&&!e.appendChild)throw"You must pass valid HTML elements, or ID of the element."});var i={list:[],fontFamily:'"Trebuchet MS", "Heiti TC", "微軟正黑體", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",minSize:0,weightFactor:1,clearCanvas:!0,backgroundColor:"#fff",gridSize:8,drawOutOfBound:!1,origin:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,wait:0,abortThreshold:0,abort:function(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotationSteps:0,shuffle:!0,rotateRatio:.1,shape:"circle",ellipticity:.65,classes:null,hover:null,click:null};if(e)for(var n in e)n in i&&(i[n]=e[n]);if("function"!=typeof i.weightFactor){var l=i.weightFactor;i.weightFactor=function(t){return t*l}}if("function"!=typeof i.shape)switch(i.shape){case"circle":default:i.shape="circle";break;case"cardioid":i.shape=function(t){return 1-Math.sin(t)};break;case"diamond":i.shape=function(t){var e=t%(2*Math.PI/4);return 1/(Math.cos(e)+Math.sin(e))};break;case"square":i.shape=function(t){return Math.min(1/Math.abs(Math.cos(t)),1/Math.abs(Math.sin(t)))};break;case"triangle-forward":i.shape=function(t){var e=t%(2*Math.PI/3);return 1/(Math.cos(e)+Math.sqrt(3)*Math.sin(e))};break;case"triangle":case"triangle-upright":i.shape=function(t){var e=(t+3*Math.PI/2)%(2*Math.PI/3);return 1/(Math.cos(e)+Math.sqrt(3)*Math.sin(e))};break;case"pentagon":i.shape=function(t){var e=(t+.955)%(2*Math.PI/5);return 1/(Math.cos(e)+.726543*Math.sin(e))};break;case"star":i.shape=function(t){var e=(t+.955)%(2*Math.PI/10);return(t+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-e)+3.07768*Math.sin(2*Math.PI/10-e)):1/(Math.cos(e)+3.07768*Math.sin(e))}}i.gridSize=Math.max(Math.floor(i.gridSize),4);var c,d,h,f,u,p,v,m=i.gridSize,w=m-i.maskGapWidth,g=Math.abs(i.maxRotation-i.minRotation),x=Math.abs(Math.floor(i.rotationSteps)),y=Math.min(i.maxRotation,i.minRotation);switch(i.color){case"random-dark":v=function(){return o(10,50)};break;case"random-light":v=function(){return o(50,90)};break;default:"function"==typeof i.color&&(v=i.color)}var b;"function"==typeof i.fontWeight&&(b=i.fontWeight);var M=null;"function"==typeof i.classes&&(M=i.classes);var _,C=!1,k=[],T=function(t){var e,o,i=t.currentTarget,n=i.getBoundingClientRect();t.touches?(e=t.touches[0].clientX,o=t.touches[0].clientY):(e=t.clientX,o=t.clientY);var r=e-n.left,a=o-n.top,s=Math.floor(r*(i.width/n.width||1)/m),l=Math.floor(a*(i.height/n.height||1)/m);return k[s][l]},S=function(t){var e=T(t);if(_!==e)return _=e,e?void i.hover(e.item,e.dimension,t):void i.hover(void 0,void 0,t)},I=function(t){var e=T(t);e&&(i.click(e.item,e.dimension,t),t.preventDefault())},E=[],O=function(t){if(E[t])return E[t];var e=8*t,o=e,n=[];for(0===t&&n.push([f[0],f[1],0]);o--;){var r=1;"circle"!==i.shape&&(r=i.shape(o/e*2*Math.PI)),n.push([f[0]+t*r*Math.cos(-o/e*2*Math.PI),f[1]+t*r*Math.sin(-o/e*2*Math.PI)*i.ellipticity,o/e*2*Math.PI])}return E[t]=n,n},R=function(){return i.abortThreshold>0&&(new Date).getTime()-p>i.abortThreshold},P=function(){return 0===i.rotateRatio?0:Math.random()>i.rotateRatio?0:0===g?y:x>0?y+Math.floor(Math.random()*x)*g/(x-1):y+Math.random()*g},z=function(t,e,o){var n=!1,r=i.weightFactor(e);if(r<=i.minSize)return!1;var s=1;r<a&&(s=function(){for(var t=2;t*r<a;)t+=2;return t}());var l;l=b?b(t,e,r):i.fontWeight;var c=document.createElement("canvas"),d=c.getContext("2d",{willReadFrequently:!0});d.font=l+" "+(r*s).toString(10)+"px "+i.fontFamily;var h=d.measureText(t).width/s,f=Math.max(r*s,d.measureText("m").width,d.measureText("Ｗ").width)/s,u=h+2*f,p=3*f,v=Math.ceil(u/m),w=Math.ceil(p/m);u=v*m,p=w*m;var g=-h/2,x=.4*-f,y=Math.ceil((u*Math.abs(Math.sin(o))+p*Math.abs(Math.cos(o)))/m),M=Math.ceil((u*Math.abs(Math.cos(o))+p*Math.abs(Math.sin(o)))/m),_=M*m,C=y*m;c.setAttribute("width",_),c.setAttribute("height",C),n&&(document.body.appendChild(c),d.save()),d.scale(1/s,1/s),d.translate(_*s/2,C*s/2),d.rotate(-o),d.font=l+" "+(r*s).toString(10)+"px "+i.fontFamily,d.fillStyle="#000",d.textBaseline="middle",d.fillText(t,g*s,(x+.5*r)*s);var k=d.getImageData(0,0,_,C).data;if(R())return!1;n&&(d.strokeRect(g*s,x,h*s,f*s),d.restore());for(var T,S,I,E=[],O=M,P=[y/2,M/2,y/2,M/2];O--;)for(T=y;T--;){I=m;t:{for(;I--;)for(S=m;S--;)if(k[4*((T*m+I)*_+(O*m+S))+3]){E.push([O,T]),O<P[3]&&(P[3]=O),O>P[1]&&(P[1]=O),T<P[0]&&(P[0]=T),T>P[2]&&(P[2]=T),n&&(d.fillStyle="rgba(255, 0, 0, 0.5)",d.fillRect(O*m,T*m,m-.5,m-.5));break t}n&&(d.fillStyle="rgba(0, 0, 255, 0.5)",d.fillRect(O*m,T*m,m-.5,m-.5))}}return n&&(d.fillStyle="rgba(0, 255, 0, 0.5)",d.fillRect(P[3]*m,P[0]*m,(P[1]-P[3]+1)*m,(P[2]-P[0]+1)*m)),{mu:s,occupied:E,bounds:P,gw:M,gh:y,fillTextOffsetX:g,fillTextOffsetY:x,fillTextWidth:h,fillTextHeight:f,fontSize:r}},F=function(t,e,o,n,r){for(var a=r.length;a--;){var s=t+r[a][0],l=e+r[a][1];if(s>=d||l>=h||s<0||l<0){if(!i.drawOutOfBound)return!1}else if(!c[s][l])return!1}return!0},L=function(o,n,r,a,s,l,c,d,h,f){var u,p=r.fontSize;if(u=v?v(a,s,p,l,c):i.color,t[0].getContext&&(w=t[0].getContext("2d"),g=w.createLinearGradient(0,0,0,40),w.shadowColor=e.shadowColor,w.shadowOffsetX=e.shadowOffsetX,w.shadowOffsetY=e.shadowOffsetY,w.shadowBlur=e.shadowBlur),"[object Array]"===Object.prototype.toString.call(u)){var w,g,x=u[f%u.length];if(t[0].getContext&&"[object Array]"===Object.prototype.toString.call(x)){for(var y=0;y<x.length;y++)g.addColorStop(y/x.length,x[y]);x=g}u=x}var _;_=b?b(a,s,p):i.fontWeight;var C;C=M?M(a,s,p):i.classes;var k,T=r.bounds;k={x:(o+T[3])*m,y:(n+T[0])*m,w:(T[1]-T[3]+1)*m,h:(T[2]-T[0]+1)*m},t.forEach(function(t,s){if(t.getContext){var l=t.getContext("2d"),c=r.mu;l.save(),l.scale(1/c,1/c),l.font=_+" "+(p*c).toString(10)+"px "+i.fontFamily,l.fillStyle=u,l.translate((o+r.gw/2)*m*c,(n+r.gh/2)*m*c),0!==d&&l.rotate(-d),l.textBaseline="middle",l.fillText(a,r.fillTextOffsetX*c,(r.fillTextOffsetY+.5*p)*c),l.restore()}else{var f=document.createElement("span"),v="";v="rotate("+-d/Math.PI*180+"deg) ",1!==r.mu&&(v+="translateX(-"+r.fillTextWidth/4+"px) scale("+1/r.mu+")");var w={position:"absolute",display:"block",font:_+" "+p*r.mu+"px "+i.fontFamily,left:(o+r.gw/2)*m+r.fillTextOffsetX+"px",top:(n+r.gh/2)*m+r.fillTextOffsetY+"px",width:r.fillTextWidth+"px",height:r.fillTextHeight+"px",lineHeight:p+"px",whiteSpace:"nowrap",transform:v,webkitTransform:v,msTransform:v,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%",textShadow:e.shadowOffsetX+"px "+e.shadowOffsetY+"px "+e.shadowBlur+"px "+e.shadowColor};u&&("[object Array]"===Object.prototype.toString.call(u)&&(w=Object.assign({webkitBackgroundClip:"text",webkitTextFillColor:"transparent",backgroundImage:"-webkit-linear-gradient(top,"+u.join(",")+")"},w)),w.color=u),f.textContent=a;for(var g in w)f.style[g]=w[g];if(h)for(var x in h)f.setAttribute(x,h[x]);C&&(f.className+=C),t.appendChild(f)}})},j=function(e,o,i,n,r){if(!(e>=d||o>=h||e<0||o<0)){if(c[e][o]=!1,i){var a=t[0].getContext("2d");a.fillRect(e*m,o*m,w,w)}C&&(k[e][o]={item:r,dimension:n})}},B=function(e,o,n,r,a,s){var l,c=a.occupied,f=i.drawMask;f&&(l=t[0].getContext("2d"),l.save(),l.fillStyle=i.maskColor);var u;if(C){var p=a.bounds;u={x:(e+p[3])*m,y:(o+p[0])*m,w:(p[1]-p[3]+1)*m,h:(p[2]-p[0]+1)*m}}for(var v=c.length;v--;){var w=e+c[v][0],g=o+c[v][1];w>=d||g>=h||w<0||g<0||j(w,g,f,u,s)}f&&l.restore()},A=function(t,e){var o,n,r;Array.isArray(t)?(o=t[0],n=t[1]):(o=t.word,n=t.weight,r=t.attributes);var a=P(),l=z(o,n,a);if(!l)return!1;if(R())return!1;if(!i.drawOutOfBound){var c=l.bounds;if(c[1]-c[3]+1>d||c[2]-c[0]+1>h)return!1}for(var f=u+1,p=function(i){var s=Math.floor(i[0]-l.gw/2),c=Math.floor(i[1]-l.gh/2),d=l.gw,h=l.gh;return!!F(s,c,d,h,l.occupied)&&(L(s,c,l,o,n,u-f,i[2],a,r,e),B(s,c,d,h,l,t),!0)};f--;){var v=O(u-f);i.shuffle&&(v=[].concat(v),s(v));var m=v.some(p);if(m)return!0}return!1},W=function(e,o,i){return o?!t.some(function(t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!0,o,i||{}),!t.dispatchEvent(n)},this):void t.forEach(function(t){var n=document.createEvent("CustomEvent");n.initCustomEvent(e,!0,o,i||{}),t.dispatchEvent(n)},this)},D=function(){var e=t[0];if(e.getContext)d=Math.ceil(e.width/m),h=Math.ceil(e.height/m);else{var o=e.getBoundingClientRect();d=Math.ceil(o.width/m),h=Math.ceil(o.height/m)}if(W("wordcloudstart",!0)){f=i.origin?[i.origin[0]/m,i.origin[1]/m]:[d/2,h/2],u=Math.floor(Math.sqrt(d*d+h*h)),c=[];var n,r,a;if(!e.getContext||i.clearCanvas)for(t.forEach(function(t){if(t.getContext){var e=t.getContext("2d");e.fillStyle=i.backgroundColor,e.clearRect(0,0,d*(m+1),h*(m+1)),e.fillRect(0,0,d*(m+1),h*(m+1))}else t.textContent="",t.style.backgroundColor=i.backgroundColor,t.style.position="relative"}),n=d;n--;)for(c[n]=[],r=h;r--;)c[n][r]=!0;else{var s=document.createElement("canvas").getContext("2d");s.fillStyle=i.backgroundColor,s.fillRect(0,0,1,1);var l=s.getImageData(0,0,1,1).data,v=e.getContext("2d").getImageData(0,0,d*m,h*m).data;n=d;for(var w,g;n--;)for(c[n]=[],r=h;r--;){g=m;t:for(;g--;)for(w=m;w--;)for(a=4;a--;)if(v[4*((r*m+g)*d*m+(n*m+w))+a]!==l[a]){c[n][r]=!1;break t}c[n][r]!==!1&&(c[n][r]=!0)}v=s=l=void 0}if(i.hover||i.click){for(C=!0,n=d+1;n--;)k[n]=[];i.hover&&e.addEventListener("mousemove",S);var x=function(t){t.preventDefault()};i.click&&(e.addEventListener("click",I),e.addEventListener("touchstart",I),e.addEventListener("touchend",x),e.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)"),e.addEventListener("wordcloudstart",function t(){e.removeEventListener("wordcloudstart",t),e.removeEventListener("mousemove",S),e.removeEventListener("click",I),e.removeEventListener("touchstart",I),e.removeEventListener("touchend",x),_=void 0})}a=0;var y,b;0!==i.wait?(y=window.setTimeout,b=window.clearTimeout):(y=window.setImmediate,b=window.clearImmediate);var M=function(e,o){t.forEach(function(t){t.addEventListener(e,o)},this)},T=function(e,o){t.forEach(function(t){t.removeEventListener(e,o)},this)},E=function t(){T("wordcloudstart",t),b(O)};M("wordcloudstart",E);var O=y(function t(){if(a>=i.list.length)return b(O),W("wordcloudstop",!1),void T("wordcloudstart",E);p=(new Date).getTime();var e=A(i.list[a],a),o=!W("wordclouddrawn",!0,{item:i.list[a],drawn:e});return R()||o?(b(O),i.abort(),W("wordcloudabort",!1),W("wordcloudstop",!1),void T("wordcloudstart",E)):(a++,void(O=y(t,i.wait)))},i.wait)}};D()}};l.isSupported=r,l.minFontSize=a,o.WordCloud=l,i=[],n=function(){return l}.apply(e,i),!(void 0!==n&&(t.exports=n))}(this)}).call(window)}])});