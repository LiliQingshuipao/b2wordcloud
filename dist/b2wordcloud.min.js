!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.B2wordcloud=e():t.B2wordcloud=e()}(this,function(){return function(t){function e(o){if(i[o])return i[o].exports;var a=i[o]={exports:{},id:o,loaded:!1};return t[o].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){var i;for(i in e)t[i]=t[i]&&"[object Object]"===t[i].toString()?a(t[i],e[i]):t[i]=e[i];return t}function n(t,e){var i=document.createElement("canvas").getContext("2d");i.fillStyle="#ffffff",i.fillRect(0,0,1,1);var o=i.getImageData(0,0,1,1).data,a=document.createElement("canvas");a.width=e.width,a.height=e.height;var n=a.getContext("2d");n.drawImage(t,0,0,t.width,t.height,0,0,a.width,a.height);for(var r=n.getImageData(0,0,e.width,e.height),s=n.createImageData(r),l=0;l<r.data.length;l+=4)r.data[l+3]>128?(s.data[l]=o[0],s.data[l+1]=o[1],s.data[l+2]=o[2],s.data[l+3]=o[3]):(s.data[l]=o[0],s.data[l+1]=o[1],s.data[l+2]=o[2],s.data[l+3]=o[3]?o[3]-1:0);n.putImageData(s,0,0),n=e.getContext("2d"),n.drawImage(a,0,0),a=n=r=s=i=o=void 0}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=i(1),l=e.B2wordcloud=function(){function t(e,i){o(this,t),this._wrapper=e,this._wrapper.style.position="relative",this._container=null,this._tooltip=null,this._options=a({renderer:"canvas",effect:"equal",tooltip:{show:!0,formatter:null},clearCanvas:!i.maskImage},i),this._wordcloud2=null,this._maskCanvas=null,this._shapeCanvas=null,this._tempCanvas=null,this._maskImg=null,this._init(),this._cacheHoverParams={item:null,dimension:null,event:null}}return r(t,[{key:"_init",value:function(){this._sortList(this._options),this._initContainer(),this._setOptions()}},{key:"_sortList",value:function(t){t.list=t.list.sort(function(t,e){return e[1]-t[1]})}},{key:"_setDefaultFontSize",value:function(t){t.autoFontSize?(t.maxFontSize=this._wrapper.clientWidth,t.minFontSize="number"==typeof t.minFontSize?t.minFontSize:10):(t.maxFontSize="number"==typeof t.maxFontSize?t.maxFontSize:36,t.minFontSize="number"==typeof t.minFontSize?t.minFontSize:10)}},{key:"_initContainer",value:function(){this._maskCanvas=document.createElement("canvas"),this._setCanvasSize(this._maskCanvas),"div"===this._options.renderer?(this._container=document.createElement("div"),this._container.style.width="100%",this._container.style.height="100%",this._createTempCanvas()):"canvas"===this._options.renderer&&(this._container=document.createElement("canvas"),this._setCanvasSize()),this._wrapper.appendChild(this._container)}},{key:"_createTempCanvas",value:function(){this._tempCanvas=document.createElement("canvas"),this._setCanvasSize(this._tempCanvas)}},{key:"_initTooltip",value:function(){this._tooltip||(this._tooltip=document.createElement("div"),this._tooltip.className=this._options.tooltip.className||"",this._tooltip.style.backgroundColor=this._options.tooltip.backgroundColor||"rgba(0,0,0,0.8)",this._tooltip.style.color="#fff",this._tooltip.style.padding="5px",this._tooltip.style.borderRadius="5px",this._tooltip.style.fontSize="13px",this._tooltip.style.lineHeight="1.4",this._tooltip.style.webkitTransition="left 0.2s, top 0.2s",this._tooltip.style.transition="left 0.2s, top 0.2s",this._tooltip.style.position="absolute",this._tooltip.style.whiteSpace="nowrap",this._tooltip.style.zIndex="999",this._tooltip.style.display="none"),document.body.appendChild(this._tooltip)}},{key:"_setCanvasSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._container,e=this._options.clientWidth?this._options.clientWidth:this._wrapper.clientWidth,i=this._options.clientHeight?this._options.clientHeight:this._wrapper.clientHeight;t.width=e,t.height=i,t.style.width=e+"px",t.style.height=i+"px"}},{key:"_setOptions",value:function(){var t=this;if(this._setDefaultFontSize(this._options),!this._options.weightFactor&&this._fixWeightFactor(this._options),this._options.tooltip.show){this._initTooltip();var e=void 0,i=void 0,o=void 0,a=void 0,n=this._options.hover,r=this._options.mouseout;this._options.mouseout=function(){r&&r(),t._cacheHoverParams.item||(t._tooltip.style.display="none")},this._options.hover=function(r,s,l){if(t._cacheHoverParams.item=r,t._cacheHoverParams.dimension=s,t._cacheHoverParams.event=l,n&&n(r,s,l),r){var h=r[0]+": "+r[1];"[object Function]"===Object.prototype.toString.call(t._options.tooltip.formatter)&&(h=t._options.tooltip.formatter(r)),t._tooltip.style.display="block",e=t._tooltip.clientWidth,i=t._tooltip.clientHeight,o=i+15,a=e/2+5;var c=l.pageY-o,f=l.pageX-a;if("function"==typeof t._options.tooltip.position){var d=t._options.tooltip.position(r,s,l);d&&(c=d.top,f=d.left)}t._tooltip.style.position="absolute",t._tooltip.style.top=c+"px",t._tooltip.style.left=f+"px",t._tooltip.innerHTML=h}else t._tooltip.style.display="none"}}this._options&&this._options.maskImage?this._maskImage():this._render()}},{key:"_maskImage",value:function(){var t=this,e=window.document.createElement("img");e.crossOrigin="Anonymous",e.src=this._options.maskImage,e.onload=function(){t._maskImg=e,t._shapeCanvas=document.createElement("canvas"),t._shapeCanvas.width=e.width,t._shapeCanvas.height=e.height;var i=t._shapeCanvas.getContext("2d");i.drawImage(e,0,0,e.width,e.height);for(var o=i.getImageData(0,0,t._shapeCanvas.width,t._shapeCanvas.height),a=i.createImageData(o),n=0;n<o.data.length;n+=4){var r=o.data[n]+o.data[n+1]+o.data[n+2],s=o.data[n+3];s<128||r>384?(a.data[n]=a.data[n+1]=a.data[n+2]=255,a.data[n+3]=0):(a.data[n]=a.data[n+1]=a.data[n+2]=0,a.data[n+3]=255)}i.putImageData(a,0,0),t._render()}}},{key:"_render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._maskImg&&n(this._shapeCanvas,this._maskCanvas),this._wordcloud2=new s("canvas"===this._options.renderer?this._container:[this._tempCanvas,this._container],this._options,this._maskCanvas,t)}},{key:"_fixWeightFactor",value:function(t){if(t.list&&t.list.length>0){var e=function(e){if("linerMap"===t.effect){var i=a-o,n=t.maxFontSize-t.minFontSize;return 0===i?0===n?t.minFontSize:(t.minFontSize+t.maxFontSize)/2:e===o?t.minFontSize:e===a?t.maxFontSize:(e-o)/i*n+t.minFontSize}var r="number"==typeof t.fontSizeFactor?t.fontSizeFactor:.1,s=(t.maxFontSize-t.minFontSize)/(Math.pow(a,r)-Math.pow(o,r)),l=t.maxFontSize-s*Math.pow(a,r);return Math.ceil(s*Math.pow(e,r)+l)},i=function(e,i){function n(t,e){return 1/(1+Math.exp(t*e))}var r=t.optimizedWordNum;if("linerMap"===t.effect){var s=a-o,l=(t.maxFontSize-t.minFontSize)*(i>=r?n(.1,i):1);return 0===s?0===l?t.minFontSize:(t.minFontSize+t.maxFontSize)/2:e===o?t.minFontSize:e===a?t.maxFontSize:(e-o)/s*l+t.minFontSize}var h=i===r?t.maxFontSize/4:t.maxFontSize,c="number"==typeof t.fontSizeFactor?t.fontSizeFactor:.1,f=(h-t.minFontSize)/(Math.pow(a,c)-Math.pow(o,c)),d=h-f*Math.pow(a,c);return Math.ceil(f*Math.pow(e,c)+d)},o=t.list[t.list.length-1][1],a=t.enableSquareAdaptor&&t.list[1]&&t.list[1][1]?t.list[1][1]:t.list[0][1];a>o?t.weightFactor=t.enableOptimize?i:e:t.weightFactor=function(e){return t.maxFontSize}}}},{key:"dispatchAction",value:function(t){switch(t.type){case"highlight":this._wordcloud2.highlight(t.dataIndex,t.keepAlive);break;case"downplay":this._wordcloud2.downplay(t.dataIndex,t.keepAlive)}}}]),t}();t.exports=l},function(t,e,i){function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var a,n;(function(){/*!
	   * wordcloud2.js
	   * http://timdream.org/wordcloud2.js/
	   *
	   * Copyright 2011 - 2013 Tim Chien
	   * Released under the MIT license
	   */
"use strict";window.setImmediate||(window.setImmediate=function(){return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(!window.postMessage||!window.addEventListener)return null;var t=[void 0],e="zero-timeout-message",i=function(i){var o=t.length;return t.push(i),window.postMessage(e+o.toString(36),"*"),o};return window.addEventListener("message",function(i){if("string"==typeof i.data&&i.data.substr(0,e.length)===e){i.stopImmediatePropagation();var o=parseInt(i.data.substr(e.length),36);t[o]&&(t[o](),t[o]=void 0)}},!0),window.clearImmediate=function(e){t[e]&&(t[e]=void 0)},i}()||function(t){window.setTimeout(t,0)}}()),window.clearImmediate||(window.clearImmediate=function(){return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(t){window.clearTimeout(t)}}()),function(i){var r=function(){var t=document.createElement("canvas");if(!t||!t.getContext)return!1;var e=t.getContext("2d");return!!e&&(!!e.getImageData&&(!!e.fillText&&(!!Array.prototype.some&&!!Array.prototype.push)))}(),s=function(){if(r){for(var t,e,i=document.createElement("canvas").getContext("2d"),o=20;o;){if(i.font=o.toString(10)+"px sans-serif",i.measureText("Ｗ").width===t&&i.measureText("m").width===e)return o+1;t=i.measureText("Ｗ").width,e=i.measureText("m").width,o--}return 0}}(),l=function(t){for(var e,i,o=t.length;o;e=Math.floor(Math.random()*o),i=t[--o],t[o]=t[e],t[e]=i);return t},h=function(t,e,i){function a(t,e){return"hsl("+(360*Math.random()).toFixed()+","+(30*Math.random()+70).toFixed()+"%,"+(Math.random()*(e-t)+t).toFixed()+"%)"}if(r){Array.isArray(t)||(t=[t]);var n=function(t){var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e*2},h=null,c=1;t.forEach(function(e,i){if(e.getContext&&e.getContext("2d")&&(h=e,c=n(e.getContext("2d"))),"string"==typeof e){if(t[i]=document.getElementById(e),!t[i])throw"The element id specified is not found."}else if(!e.tagName&&!e.appendChild)throw"You must pass valid HTML elements, or ID of the element."});var f={list:[],fontFamily:'"Trebuchet MS", "Heiti TC", "微軟正黑體", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"bold",color:"random-dark",minSize:0,weightFactor:1,clearCanvas:!0,backgroundColor:"#fff",gridSize:8,drawOutOfBound:!1,origin:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,wait:0,abortThreshold:0,abort:function(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotationSteps:0,shuffle:!0,rotateRatio:.1,shape:"circle",ellipticity:.65,classes:null,hover:null,click:null,cursorWhenHover:"pointer",mouseout:null,enableSquareAdaptor:!1},d=this;if(d.words=[],d.elements=t,e)for(var u in e)u in f&&(f[u]=e[u]);if("function"!=typeof f.weightFactor){var m=f.weightFactor;f.weightFactor=function(t){return t*m}}if("function"!=typeof f.shape)switch(f.shape){case"circle":default:f.shape="circle";break;case"cardioid":f.shape=function(t){return 1-Math.sin(t)};break;case"diamond":f.shape=function(t){var e=t%(2*Math.PI/4);return 1/(Math.cos(e)+Math.sin(e))};break;case"square":f.shape=function(t){return Math.min(1/Math.abs(Math.cos(t)),1/Math.abs(Math.sin(t)))};break;case"triangle-forward":f.shape=function(t){var e=t%(2*Math.PI/3);return 1/(Math.cos(e)+Math.sqrt(3)*Math.sin(e))};break;case"triangle":case"triangle-upright":f.shape=function(t){var e=(t+3*Math.PI/2)%(2*Math.PI/3);return 1/(Math.cos(e)+Math.sqrt(3)*Math.sin(e))};break;case"pentagon":f.shape=function(t){var e=(t+.955)%(2*Math.PI/5);return 1/(Math.cos(e)+.726543*Math.sin(e))};break;case"star":f.shape=function(t){var e=(t+.955)%(2*Math.PI/10);return(t+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-e)+3.07768*Math.sin(2*Math.PI/10-e)):1/(Math.cos(e)+3.07768*Math.sin(e))}}f.gridSize=Math.max(Math.floor(f.gridSize),4);var p,v,g,w,x,b,y,_,S,M,C=f.gridSize,k=C-f.maskGapWidth,z=Math.abs(f.maxRotation-f.minRotation),F=Math.abs(Math.floor(f.rotationSteps)),I=Math.min(f.maxRotation,f.minRotation);switch(f.color){case"random-dark":M=function(){return a(10,50)};break;case"random-light":M=function(){return a(50,90)};break;default:"function"==typeof f.color&&(M=f.color)}var T;"function"==typeof f.fontWeight&&(T=f.fontWeight);var E=null;"function"==typeof f.classes&&(E=f.classes);var O,P=!1,R=[],A=function(t){var e,i,o=t.currentTarget,a=o.getBoundingClientRect();t.touches?(e=t.touches[0].clientX,i=t.touches[0].clientY):(e=t.clientX,i=t.clientY);var n=e-a.left,r=i-a.top,s=Math.floor(n*(o.width/a.width/c||1)/C),l=Math.floor(r*(o.height/a.height/c||1)/C);return R[s][l]},L=function(){f.mouseout()},j=function(t){var e=A(t);if(O!==e){if(O=e,!e)return f.hover(void 0,void 0,t),void(t.target.style.cursor="default");"pointer"===f.cursorWhenHover&&(t.target.style.cursor="pointer"),f.hover(e.item,e.dimension,t)}},W=function(t){var e=A(t);e&&(f.click(e.item,e.dimension,t,e.index),t.preventDefault())},D=[],B=function(t){if(D[t])return D[t];var e=8*t,i=e,o=[];for(0===t&&o.push([w[0],w[1],0]);i--;){var a=1;"circle"!==f.shape&&(a=f.shape(i/e*2*Math.PI)),o.push([w[0]+t*a*Math.cos(-i/e*2*Math.PI),w[1]+t*a*Math.sin(-i/e*2*Math.PI)*f.ellipticity,i/e*2*Math.PI])}return D[t]=o,o},H=function(){return f.abortThreshold>0&&(new Date).getTime()-S>f.abortThreshold},q=function(){return 0===f.rotateRatio?0:Math.random()>f.rotateRatio?0:0===z?I:F>0?I+Math.floor(Math.random()*F)*z/(F-1):I+Math.random()*z},N=function(t,e,i,o,a,n,r){var l=!1,h=n?n-n*o:f.weightFactor(e,r)*y*_;if(h<=f.minSize)return!1;var c=1;h<s&&(c=function(){for(var t=2;t*h<s;)t+=2;return t}());var d;d=T?T(t,e,h):f.fontWeight;var u=document.createElement("canvas"),m=u.getContext("2d",{willReadFrequently:!0});m.font=d+" "+(h*c).toString(10)+"px "+f.fontFamily;var p=m.measureText(t).width/c,v=Math.max(h*c,m.measureText("m").width,m.measureText("Ｗ").width)/c,g=a?p+2*v:p,w=a?3*v:v,x=Math.ceil(g/C),b=Math.ceil(w/C);g=x*C,w=b*C;var S=-p/2,M=.4*-v,k=Math.ceil((g*Math.abs(Math.sin(i))+w*Math.abs(Math.cos(i)))/C),z=Math.ceil((g*Math.abs(Math.cos(i))+w*Math.abs(Math.sin(i)))/C),F=z*C,I=k*C;u.setAttribute("width",F),u.setAttribute("height",I),l&&(document.body.appendChild(u),m.save()),m.scale(1/c,1/c),m.translate(F*c/2,I*c/2),m.rotate(-i),m.font=d+" "+(h*c).toString(10)+"px "+f.fontFamily,m.fillStyle="#000",m.textBaseline="middle",m.fillText(t,S*c,(M+.5*h)*c);var E=m.getImageData(0,0,F,I).data;if(H())return!1;l&&(m.strokeRect(S*c,M,p*c,v*c),m.restore());for(var O,P,R,A=[],L=z,j=[k/2,z/2,k/2,z/2];L--;)for(O=k;O--;){R=C;t:{for(;R--;)for(P=C;P--;)if(E[4*((O*C+R)*F+(L*C+P))+3]){A.push([L,O]),L<j[3]&&(j[3]=L),L>j[1]&&(j[1]=L),O<j[0]&&(j[0]=O),O>j[2]&&(j[2]=O),l&&(m.fillStyle="rgba(255, 0, 0, 0.5)",m.fillRect(L*C,O*C,C-.5,C-.5));break t}l&&(m.fillStyle="rgba(0, 0, 255, 0.5)",m.fillRect(L*C,O*C,C-.5,C-.5))}}return l&&(m.fillStyle="rgba(0, 255, 0, 0.5)",m.fillRect(j[3]*C,j[0]*C,(j[1]-j[3]+1)*C,(j[2]-j[0]+1)*C)),{mu:c,occupied:A,bounds:j,gw:z,gh:k,fillTextOffsetX:S,fillTextOffsetY:M,fillTextWidth:p,fillTextHeight:v,fontSize:h}},X=function(t,e){switch(e){case 1:return{x:0,y:0};case 2:return{x:0,y:t.gh};case 3:return{x:t.gw,y:0};case 4:return{x:t.gw,y:t.gh};default:return{x:t.gw/2,y:t.gh/2}}},Y=function(t,i,o,a,n){for(var r=n.length,s=e.enableSquareAdaptor?1:0;r--;){var l=t+n[r][0],h=i+n[r][1];if(l>=v-s||h>=g||l<0||h<0){if(!f.drawOutOfBound)return!1}else if(!p[l][h])return!1}return!0};d.drawItem=function(t,e){t&&(e?U(t.gx,t.gy,t.info,t.word,t.weight,t.distance,t.theta,t.rotateDeg,t.attributes,t.i,t.highlight):K(t.gx,t.gy,t.gw,t.gh,t.info,t.item,t.i))};var J=function(t,e,i,o,a,n,r,s,l){t.beginPath(0),t.save(),t.rotate(l),t.fillStyle=r,t.fillRect(e,i,o,a),t.rect(e,i,o,a),t.lineWidth="1",t.strokeStyle=s,t.stroke(),t.restore()},G=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,o=t.toLowerCase();if(o&&i.test(o)){if(4===o.length){for(var a="#",n=1;n<4;n+=1)a+=o.slice(n,n+1).concat(o.slice(n,n+1));o=a}for(var r=[],s=1;s<7;s+=2)r.push(parseInt("0x"+o.slice(s,s+2)));return"rgba("+r.join(",")+","+e+")"}return o.startsWith("rgba")?o.split(",").map(function(t,e){return 3===e&&(t=" 0.2)"),t}).join(","):o},U=function(i,a,n,r,s,l,h,c,d,u,m){var p,v=n.fontSize;p=M?M(r,s,v,l,h):f.color;var g;g=T?T(r,s,v):f.fontWeight;var w;w=E?E(r,s,v):f.classes;var x,b=n.bounds;x={x:(i+b[3])*C,y:(a+b[0])*C,w:(b[1]-b[3]+1)*C,h:(b[2]-b[0]+1)*C};var y,_,S,k=!1,z="left";"[object Array]"===Object.prototype.toString.call(p)&&(y=p[u%p.length],p=y,"[object Array]"===Object.prototype.toString.call(y)&&(k=!0),k&&"[object Number]"!==Object.prototype.toString.call(y[y.length-1])&&(y[y.length]=0),z=0===y[y.length-1]?"top":"left"),S=JSON.parse(JSON.stringify(p)),t.forEach(function(t,s){if(t.getContext){var l=t.getContext("2d"),h=n.mu;if(l.save(),l.scale(1/h,1/h),l.font=g+" "+(v*h).toString(10)+"px "+f.fontFamily,k){var u=l.measureText(r).width;_=l.createLinearGradient("top"!==z?-u/2:0,"top"===z?-v/2:0,"top"!==z?u/2:0,"top"===z?v/2:0);for(var s=0;s<y.length-1;s++)_.addColorStop(s/(y.length-2),y[s]);p=_}if(l.fillStyle=p,l.translate((i+n.gw/2)*C*h,(a+n.gh/2)*C*h),m){var x;if(k){x=l.createLinearGradient("top"!==z?-n.fillTextOffsetX*h-4/h/2:0,"top"===z?-n.fillTextOffsetY*h-4/h/2:0,"top"!==z?n.fillTextOffsetX*h-4/h/2:0,"top"===z?n.fillTextOffsetY*h-4/h/2:0);for(var s=0;s<y.length-1;s++)x.addColorStop(s/(y.length-2),G(y[y.length-2-s],.2))}J(l,n.fillTextOffsetX*h-2/h,n.fillTextOffsetY*h-2/h,l.measureText(r).width+4/h,v+4/h,4/h,k?x:G(y?y:p,.2),k?y[0]:y?y:p,-c)}l.shadowColor=e.shadowColor,l.shadowOffsetX=e.shadowOffsetX,l.shadowOffsetY=e.shadowOffsetY,l.shadowBlur=e.shadowBlur,0!==c&&l.rotate(-c),l.textBaseline="middle",l.fillText(r,n.fillTextOffsetX*h,(n.fillTextOffsetY+.5*v)*h),l.restore()}else{k&&(p=y);var b=document.createElement("div"),S=document.createElement("span"),M="";M="rotate("+-c/Math.PI*180+"deg) ",1!==n.mu&&(M+="translateX(-"+n.fillTextWidth/4+"px) scale("+1/n.mu+")");var F=o({position:"absolute",display:"block",font:g+" "+v*n.mu+"px "+f.fontFamily,left:(i+n.gw/2)*C+n.fillTextOffsetX+"px",top:(a+n.gh/2)*C+n.fillTextOffsetY+"px",width:n.fillTextWidth+"px","box-sizing":"border-box","border-radius":"4px","border-style":"solid","border-width":"1px","border-color":"transparent",lineHeight:v+"px",whiteSpace:"nowrap",transform:M,webkitTransform:M,msTransform:M,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%"},"font",g+" "+v*n.mu+"px "+f.fontFamily),I={display:"block",font:g+" "+v*n.mu+"px "+f.fontFamily,filter:"drop-shadow("+e.shadowOffsetX+"px "+e.shadowOffsetY+"px "+e.shadowBlur+"px "+e.shadowColor+")"};m&&(F=Object.assign(F,o({"border-color":k?p[0]:p,"border-style":"solid","border-width":"1px"},"border-color",k?p[0]:p)),k?F.backgroundImage="-webkit-linear-gradient("+z+","+p.filter(function(t,e){return e!=p.length-1}).map(function(t){return G(t,.2)}).join(",")+")":F.backgroundColor=G(p,.2)),p&&("[object Array]"===Object.prototype.toString.call(p)&&(I=Object.assign({webkitBackgroundClip:"text",webkitTextFillColor:"transparent",backgroundImage:"-webkit-linear-gradient("+z+","+p.filter(function(t,e){return e!=p.length-1}).join(",")+")"},I)),I.color=p),S.textContent=r;for(var T in F)b.style[T]=F[T];for(var T in I)S.style[T]=I[T];if(d)for(var E in d)S.setAttribute(E,d[E]);w&&(S.className+=w),b.appendChild(S),t.appendChild(b)}})},$=function(e,i,o,a,n,r){if(!(e>=v||i>=g||e<0||i<0)){if(p[e][i]=!1,o){var s=t[0].getContext("2d");s.fillRect(e*C,i*C,k,k)}P&&(R[e][i]={item:n,dimension:a,index:r})}},K=function(e,i,o,a,n,r,s){var l,h=n.occupied,c=f.drawMask;c&&(l=t[0].getContext("2d"),l.save(),l.fillStyle=f.maskColor);var d;if(P){var u=n.bounds;d={x:(e+u[3])*C,y:(i+u[0])*C,w:(u[1]-u[3]+1)*C,h:(u[2]-u[0]+1)*C}}for(var m=h.length;m--;){var p=e+h[m][0],w=i+h[m][1];p>=v||w>=g||p<0||w<0||$(p,w,c,d,r,s)}c&&l.restore()},Q=function(t,i){var o,a,n,r,s,h=i;Array.isArray(t)?(o=t[0],a=t[1],r=t[2]):(o=t.word,a=t.weight,n=t.attributes,r=t.highlight);var c=function(i){var c=q(),u=N(o,a,c,.2,!0,i,h);if(s=u.fontSize,!u)return!1;if(H())return!1;if(!f.drawOutOfBound){var m=u.bounds;if(m[1]-m[3]+1>v||m[2]-m[0]+1>g)return!1}for(var p=b+1,w=function(e,i){var s=Math.floor(e[0]-u.gw/2),l=Math.floor(e[1]-u.gh/2),h=u.gw,f=u.gh;if(!Y(s,l,h,f,u.occupied))return!1;var m={gx:s,gy:l,info:u,word:o,weight:a,distance:b-p,theta:e[2],attributes:n,item:t,i:i,highlight:r,rotateDeg:c};return d.words.push(m),m};p--;){var x=e.enableOptimize&&h>=e.optimizedWordNum&&"linerMap"!==e.effect,y=x?b-p:p,_=B(b-y);f.shuffle&&(_=[].concat(_),l(_));for(var S,M=0;M<_.length;M++){var C=w(_[M],h);if(C){S=C;break}}if(S)return S}return!1},u=c();if(u)return u;if(!e.autoFontSize)return!1;if(s<=e.minFontSize)return!1;for(;!u;)if(u=c(s))return e.maxFontSize=s,u},V=function(t,i){var o,a,n,r,s,h=[w[0],w[1],0],c=[h].concat(x.map(function(t){return[t[0],t[1],0]})),u=i;Array.isArray(t)?(o=t[0],a=t[1],r=t[2]):(o=t.word,a=t.weight,n=t.attributes,r=t.highlight);var m=function(e,i){var h=N(o,a,0,.05,!e,i,u);if(s=h.fontSize,!h)return!1;if(H())return!1;if(!f.drawOutOfBound){var c=h.bounds;if(c[1]-c[3]+1>v||c[2]-c[0]+1>g)return!1}for(var m=b+1,p=function(e,i){var s=X(h,i),l=Math.floor(e[0]-s.x)<0?Math.floor(e[0]):Math.floor(e[0]-s.x),c=Math.floor(e[1]-s.y)<0?Math.floor(e[1]):Math.floor(e[1]-s.y),f=h.gw,u=h.gh,p=function(t,e){switch(e){case 1:case 2:case 3:case 4:return!(t/Math.min(v,g)>.8);default:return!0}};if(!Y(l,c,f,u,h.occupied)||!p(f,i))return!1;var w={gx:l,gy:c,info:h,word:o,weight:a,distance:b-m,theta:e[2],attributes:n,item:t,i:i,highlight:r,rotateDeg:0};return d.words.push(w),w};m--;){var w;if(e)w=[e];else{var w=B(b-m);f.shuffle&&(w=[].concat(w),l(w))}for(var x,y=0;y<w.length;y++){var _=p(w[y],u);if(_){x=_;break}}if(x)return x}return!1},p=c[u],y=Math.min(v,g),_=y*(0!==i?C/3.6:C/1.2),S=i<1?_:void 0,M=m(p,S);if(M)return M;if(s<=e.minFontSize)return!1;for(;!M;)if(M=m(p,s))return e.maxFontSize=0===i?_/3:s,M},Z=function(e,i,o){return i?!t.some(function(t){var a=document.createEvent("CustomEvent");return a.initCustomEvent(e,!0,i,o||{}),!t.dispatchEvent(a)},this):void t.forEach(function(t){var a=document.createEvent("CustomEvent");a.initCustomEvent(e,!0,i,o||{}),t.dispatchEvent(a)},this)},tt=function(){var o=i;if(o.getContext)v=Math.ceil(o.width/C),g=Math.ceil(o.height/C);else{var a=o.getBoundingClientRect();v=Math.ceil(a.width/C),g=Math.ceil(a.height/C)}var r=400/C;if(y=e.enableSquareAdaptor?Math.min(Math.min(v,g)/r,1):1,_=1,Z("wordcloudstart",!0)){w=f.origin?[f.origin[0]/C,f.origin[1]/C]:[v/2,g/2];var s=Math.abs(Math.floor((v-g)/2)),l=v>g?[s,0]:[0,s],c=v>g?[s,g-1]:[0,s+v-1],u=v>g?[s+g-1,0]:[v-1,s],m=v>g?[s+g-1,g-1]:[v-1,s+v-1];x=[l,c,u,m],b=Math.floor(Math.sqrt(v*v+g*g)),p=[];var M,k,z,F;if(t.forEach(function(t){if(t.style.backgroundColor=f.backgroundColor,t.getContext){var e=t.getContext("2d");e.fillStyle=f.backgroundColor,e.clearRect(0,0,v*(C+1),g*(C+1)),e.fillRect(0,0,v*(C+1),g*(C+1))}else t.textContent="",t.style.position="relative"}),!o.getContext||f.clearCanvas)for(M=v;M--;)for(p[M]=[],k=g;k--;)p[M][k]=!0;else{var I=document.createElement("canvas").getContext("2d");I.fillStyle="#ffffff",I.fillRect(0,0,1,1);var T=I.getImageData(0,0,1,1).data,E=o.getContext("2d").getImageData(0,0,v*C,g*C).data;M=v;for(var A,D;M--;)for(p[M]=[],k=g;k--;){D=C;t:for(;D--;)for(A=C;A--;)for(z=4;z--;)if(E[4*((k*C+D)*v*C+(M*C+A))+z]!==T[z]){p[M][k]=!1;break t}p[M][k]!==!1&&(p[M][k]=!0)}E=I=T=void 0}if(e.enableSquareAdaptor&&0!==s)for(var z=0;z<v;z++)for(var B=0;B<g;B++)v>g?(z<s||z>s+g-1)&&(p[z][B]=!1):v<g&&(B<s||B>s+v-1)&&(p[z][B]=!1);if(F=JSON.parse(JSON.stringify(p)),_=1,f.hover||f.click){for(P=!0,M=v+1;M--;)R[M]=[];var q=function(t){t.preventDefault()};t.forEach(function(t){f.hover&&(t.addEventListener("mousemove",j),t.addEventListener("mouseout",L)),f.click&&(t.addEventListener("click",W),t.addEventListener("touchstart",W),t.addEventListener("touchend",q),t.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)"),t.addEventListener("wordcloudstart",function e(){t.removeEventListener("wordcloudstart",e),t.removeEventListener("mousemove",j),t.removeEventListener("mouseout",L),t.removeEventListener("click",W),t.removeEventListener("touchstart",W),t.removeEventListener("touchend",q),O=void 0})})}z=0;var N,X;0!==f.wait?(N=window.setTimeout,X=window.clearTimeout):(N=window.setImmediate,X=window.clearImmediate);var Y=function(e,i){t.forEach(function(t){t.addEventListener(e,i)},this)},J=function(e,i){t.forEach(function(t){t.removeEventListener(e,i)},this)},G=function t(){J("wordcloudstart",t),X(U)};Y("wordcloudstart",G);var U=N(function t(){if(z>=f.list.length)return X(U),Z("wordcloudstop",!1),void J("wordcloudstart",G);S=(new Date).getTime();var e;f.enableSquareAdaptor&&(e=V(f.list[z],z)),e||(e=Q(f.list[z],z));var i=Math.min(f.list.length,35),o=.3;if(f.enableSquareAdaptor&&z===i-1)for(var a=function(t){setTimeout(function(){d.drawItem(d.words[t],!0)},0)},n=0;n<i;n++)a(n);else(!f.enableSquareAdaptor||z>=i||_<o)&&d.drawItem(e,!0);f.enableSquareAdaptor&&z<i&&!e&&_>=o?(_-=.05,d.words=[],p=JSON.parse(JSON.stringify(F)),z=0):z++,d.drawItem(e);var r=!Z("wordclouddrawn",!0,{item:f.list[z],drawn:e&&!0});return H()||r?(X(U),f.abort(),Z("wordcloudabort",!1),Z("wordcloudstop",!1),void J("wordcloudstart",G)):void(U=N(t,f.wait))},f.wait);if(h){var $=h.getContext("2d"),K=n($);h.width=h.width*K,h.height=h.height*K,$.scale(K,K)}}};return tt(),this}};h.prototype.highlight=function(t,e){var i=this;i.elements.forEach(function(o,a){o.getContext?o.getContext("2d").clearRect(0,0,o.width,o.height):o.innerHTML="",i.words.forEach(function(o){e||(o.highlight=!1),o.i===t&&(o.highlight=!0),i.drawItem(o,!0)})})},h.prototype.downplay=function(t,e){var i=this;i.elements.forEach(function(e,o){e.getContext?e.getContext("2d").clearRect(0,0,e.width,e.height):e.innerHTML="",i.words.forEach(function(e){e.i===t&&(e.highlight=!1),i.drawItem(e,!0)})})},h.isSupported=r,h.minFontSize=s,i.WordCloud=h,a=[],n=function(){return h}.apply(e,a),!(void 0!==n&&(t.exports=n))}(this)}).call(window)}])});