<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>适配正方形</title>
    button
    <style>
        html, body, .test{
            width: 100%;
            height: 100%;
            position: relative;
        }
        #chart, #chart2 {
            width: 450px;
            height: 450px;
            margin: 0 auto
        }
    </style>
</head>
<body>
    <div class="test">
        <h1>吸收</h1>
        <button id="button">重新绘制</button>
        <div id="chart"></div>
        
    </div>
    <script src="dist/b2wordcloud.js"></script>
    <script>
        var mark = 0;
        var idx = 1032
        // var list = []
        var list4 = [{"label":"防晒","value":"269"},{"label":"淡斑","value":"114"},{"label":"油皮","value":"86"},{"label":"质地","value":"70"},{"label":"肤感","value":"54"},{"label":"成膜","value":"45"},{"label":"夏天","value":"42"},{"label":"清爽","value":"39"},{"label":"美白","value":"39"},{"label":"成分","value":"35"},{"label":"日常","value":"33"},{"label":"烟酰胺","value":"27"},{"label":"混油","value":"26"},{"label":"抗氧化","value":"26"},{"label":"干皮","value":"25"},{"label":"不搓泥","value":"23"},{"label":"推开","value":"23"},{"label":"全波段","value":"21"},{"label":"黑色素","value":"19"},{"label":"温和","value":"18"},{"label":"高倍","value":"17"},{"label":"传明酸","value":"15"},{"label":"光泽感","value":"15"},{"label":"敏感肌","value":"13"},{"label":"不油腻","value":"11"}].map(v => {return [v.label, Number(v.value)]}).slice(0, 1)
        var list2 = [
            ['测试', 104],
            ['日常', 85],
            ['粉质', 83],
            ['温柔', 81],
            ['配色', 80],
            ['百搭', 54],
            ['自然', 51],
            ['细腻', 48],
            ['珠光', 46],
            ['哑光', 45],
            ['气质', 35],
            ['显色', 33],
            ['大地色', 32],
            ['粉嫩', 31],
            ['亮片', 30],
            ['消肿', 27],
            ['少女', 21],
            ['粉色', 20],
            ['通勤', 19],
            ['质地', 19],
            ['肿眼泡', 16],
            ['深邃', 15],
            ['粉棕', 15],
            ['黄皮', 15],
            ['不飞粉', 12],
        ]
        var list1 = [
            ['清爽', 164],
            ['保湿', 160],
            ['洗面奶', 155],
            ['清洁', 142],
            ['温和', 136],
            ['乳液', 124],
            ['细腻', 98],
            ['补水', 95],
            ['爽肤水', 92],
            ['泡沫', 86],
            ['不紧绷', 83],
            ['控油', 75],
            ['干净', 64],
            ['油腻', 63],
            ['氨基酸', 55],
            ['水润', 54],
            ['油皮', 49],
            ['舒缓', 45],
            ['不刺激', 42],
            ['敏感肌', 42],
            ['滋润', 40],
            ['绵密', 40],
            ['黑头', 40],
            ['紧致', 38],
            ['不油腻', 32]
        ]
        var list = [
            ['温和',125],
            ['清爽', 122],
            ['保湿', 102],
            ['补水', 67],
            ['油皮', 40],
            ['水润', 39],
            ['不刺激', 38],
            ['日常', 24],
            ['夏天', 20],
            ['滋润', 19],
            ['熬夜', 15],
            ['干燥', 13],
            ['晚上', 11],
            ['清洁', 9],
            ['干净', 8],
            ['毛孔', 6],
            ['光滑', 6],
            ['洁净', 5],
            ['油脂', 4],
            ['控油', 4],
            ['紧绷', 4],
            ['出油', 4],
            ['油腻', 3],
            ['皮脂', 2],
            ['舒服', 1]
        ]
        var list3 = [
            ['湿敷',1176],
            ['痘痘',1009],
            ['闭口不错',866],
            ['油皮',791],
            ['保湿',779],
            ['痘肌',763],
            ['舒缓',541],
            ['吸收',513],
            ['灵芝',489],
            ['长痘',477],
            ['补水',475],
            ['维稳',470],
            ['毛孔',450],
            ['祛痘',439],
            ['泛红',438],
            ['清爽',424],
            ['混油',359],
            ['安心',354],
            ['修复',335],
            ['粉刺',311],
            ['成分',310],
            ['清洁',310],
            ['控油',306],
            ['过敏',302],
            ['熬夜',284]
            ]
        // var num = 25
        
        // var words = [
        //     '吸收',
        //     '保湿',
        //     '玻色因',
        //     '维稳',
        //     '修护'
        // ]
        // list.forEach(el  => {
        //     el.push(false)
        // })
        // for (let i = 0; i < num; i++) {
        //     var w = words[i] || "foo" + (i + 1)
        //     list.push([w, idx - i, false])
        // }
        document.getElementById('button').addEventListener('click', function() {
          console.log('click')
          render()

        })
        var render = function () {
          var wordCloud = new B2wordcloud(document.getElementById("chart"), {
              // renderer: 'div',
              list: list4,
              tooltip: {
                  formatter: function(item) {
                      return '<div>' + item[0] + '</div>' + '<div>' + item[1] + '</div>'
                  }
              },
              autoFontSize: true,
              fontFamily: '微软雅黑',
              gridSize: 5,
              effect: 'equal',
              maxFontSize: 200,
              optimizedWordNum: 5,
              minFontSize: 18,
              rotateRatio: 0,
              drawOutOfBound: false,
              topN: 1,
              fontWeight: 500,
              clientHeight: 450,
              clientWidth: 450,
              enableSquareAdaptor: true,
              shape: 'square',
              autoRatio: 0.95,
              shuffle: false,
              hover: function(item) {
                  // console.log(item)
              },
              color: function(){ return '#00bcbe' },
              click: function(a, b, c, index) {
                  wordCloud.dispatchAction({
                      type: mark === index ? 'downplay' : 'highlight',
                      dataIndex: index,
                      keepAlive: true
                  })
                  if (mark != index) { 
                      mark = index
                  } else {
                      mark = -1
                  }
              }
          })
          window.addEventListener('resize', function() {
              wordCloud.resize()
          })

        }
        render()
    </script>
</body>
</html>